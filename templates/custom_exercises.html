{% extends "base.html" %}

{% block title %}Custom Exercises - Fitness Planner{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1><i class="bi bi-person-gear text-primary"></i> Custom Exercises</h1>
                <div>
                    <span class="badge badge-success">Premium Feature</span>
                    <button class="btn btn-primary ms-2" onclick="showAddExerciseModal()">
                        <i class="bi bi-plus"></i> Add Exercise
                    </button>
                </div>
            </div>
            <p class="text-muted">Create and manage your own custom exercises to personalize your workout routines.</p>
        </div>
    </div>

    <!-- Exercise Categories -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h6>Filter by Category</h6>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary active" onclick="filterExercises('all')">All</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterExercises('strength')">Strength</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterExercises('cardio')">Cardio</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterExercises('flexibility')">Flexibility</button>
                        <button type="button" class="btn btn-outline-primary" onclick="filterExercises('bodyweight')">Bodyweight</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Exercises List -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Your Custom Exercises</h5>
                </div>
                <div class="card-body">
                    {% if custom_exercises %}
                    <div class="row" id="exerciseGrid">
                        {% for exercise in custom_exercises %}
                        <div class="col-md-6 col-lg-4 mb-3 exercise-card" data-category="{{ exercise.muscle_group }}">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">{{ exercise.name }}</h6>
                                    <p class="card-text">{{ exercise.description[:100] }}...</p>
                                    <div class="mb-2">
                                        <span class="badge badge-secondary">{{ exercise.muscle_group }}</span>
                                        <span class="badge badge-info">Level {{ exercise.difficulty_level }}</span>
                                    </div>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" onclick="viewExercise({{ exercise.id }})">
                                            <i class="bi bi-eye"></i> View
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="editExercise({{ exercise.id }})">
                                            <i class="bi bi-pencil"></i> Edit
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="deleteExercise({{ exercise.id }})">
                                            <i class="bi bi-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <!-- Demo exercises since no real custom exercises exist -->
                    <div class="row" id="exerciseGrid">
                        <div class="col-md-6 col-lg-4 mb-3 exercise-card" data-category="strength">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">Weighted Squats</h6>
                                    <p class="card-text">A variation of regular squats with added weight for increased resistance...</p>
                                    <div class="mb-2">
                                        <span class="badge badge-secondary">Legs</span>
                                        <span class="badge badge-info">Level 3</span>
                                    </div>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" onclick="viewExercise(1)">
                                            <i class="bi bi-eye"></i> View
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="editExercise(1)">
                                            <i class="bi bi-pencil"></i> Edit
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="deleteExercise(1)">
                                            <i class="bi bi-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 col-lg-4 mb-3 exercise-card" data-category="cardio">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">Stair Climbing</h6>
                                    <p class="card-text">High-intensity cardio exercise using stairs for maximum calorie burn...</p>
                                    <div class="mb-2">
                                        <span class="badge badge-secondary">Cardio</span>
                                        <span class="badge badge-info">Level 4</span>
                                    </div>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" onclick="viewExercise(2)">
                                            <i class="bi bi-eye"></i> View
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="editExercise(2)">
                                            <i class="bi bi-pencil"></i> Edit
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="deleteExercise(2)">
                                            <i class="bi bi-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 col-lg-4 mb-3 exercise-card" data-category="flexibility">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">Deep Hip Stretch</h6>
                                    <p class="card-text">A specialized stretch to improve hip mobility and reduce lower back tension...</p>
                                    <div class="mb-2">
                                        <span class="badge badge-secondary">Flexibility</span>
                                        <span class="badge badge-info">Level 2</span>
                                    </div>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <button type="button" class="btn btn-outline-primary" onclick="viewExercise(3)">
                                            <i class="bi bi-eye"></i> View
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="editExercise(3)">
                                            <i class="bi bi-pencil"></i> Edit
                                        </button>
                                        <button type="button" class="btn btn-outline-danger" onclick="deleteExercise(3)">
                                            <i class="bi bi-trash"></i> Delete
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Exercise Modal -->
<div class="modal fade" id="addExerciseModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Custom Exercise</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addExerciseForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Exercise Name</label>
                                <input type="text" class="form-control" id="exerciseName" required>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Muscle Group</label>
                                <select class="form-select" id="muscleGroup" required>
                                    <option value="">Select muscle group</option>
                                    <option value="chest">Chest</option>
                                    <option value="back">Back</option>
                                    <option value="shoulders">Shoulders</option>
                                    <option value="arms">Arms</option>
                                    <option value="legs">Legs</option>
                                    <option value="core">Core</option>
                                    <option value="cardio">Cardio</option>
                                    <option value="flexibility">Flexibility</option>
                                    <option value="full_body">Full Body</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Difficulty Level</label>
                                <select class="form-select" id="difficultyLevel" required>
                                    <option value="">Select difficulty</option>
                                    <option value="1">1 - Beginner</option>
                                    <option value="2">2 - Easy</option>
                                    <option value="3">3 - Moderate</option>
                                    <option value="4">4 - Hard</option>
                                    <option value="5">5 - Expert</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Equipment Needed</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="equipmentBodyweight" value="bodyweight">
                                    <label class="form-check-label" for="equipmentBodyweight">Bodyweight</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="equipmentDumbbells" value="dumbbells">
                                    <label class="form-check-label" for="equipmentDumbbells">Dumbbells</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="equipmentBarbell" value="barbell">
                                    <label class="form-check-label" for="equipmentBarbell">Barbell</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="equipmentKettlebells" value="kettlebells">
                                    <label class="form-check-label" for="equipmentKettlebells">Kettlebells</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="equipmentResistance" value="resistance_bands">
                                    <label class="form-check-label" for="equipmentResistance">Resistance Bands</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Description</label>
                                <textarea class="form-control" id="exerciseDescription" rows="4" required></textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Instructions</label>
                                <textarea class="form-control" id="exerciseInstructions" rows="6" required placeholder="1. Step one...&#10;2. Step two...&#10;3. Step three..."></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="addExercise()">Add Exercise</button>
            </div>
        </div>
    </div>
</div>

<script>
function showAddExerciseModal() {
    const modal = new bootstrap.Modal(document.getElementById('addExerciseModal'));
    modal.show();
}

function addExercise() {
    const name = document.getElementById('exerciseName').value;
    const muscleGroup = document.getElementById('muscleGroup').value;
    const difficulty = document.getElementById('difficultyLevel').value;
    const description = document.getElementById('exerciseDescription').value;
    const instructions = document.getElementById('exerciseInstructions').value;
    
    if (!name || !muscleGroup || !difficulty || !description || !instructions) {
        alert('Please fill in all required fields');
        return;
    }
    
    // Demo save functionality
    alert('Custom exercise added successfully! (Demo mode)');
    
    // Close modal and refresh page
    const modal = bootstrap.Modal.getInstance(document.getElementById('addExerciseModal'));
    modal.hide();
    location.reload();
}

function filterExercises(category) {
    const cards = document.querySelectorAll('.exercise-card');
    const buttons = document.querySelectorAll('.btn-group .btn');
    
    // Update active button
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Show/hide cards based on category
    cards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

function viewExercise(id) {
    alert(`Viewing exercise details for ID: ${id} (Demo mode)`);
}

function editExercise(id) {
    alert(`Editing exercise ID: ${id} (Demo mode)`);
}

function deleteExercise(id) {
    if (confirm('Are you sure you want to delete this exercise?')) {
        alert(`Exercise ID: ${id} deleted! (Demo mode)`);
        location.reload();
    }
}
</script>
{% endblock %}